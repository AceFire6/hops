# NATS Clients Port
port: 5222

# PID file shared with configuration reloader.
# pid_file: "/var/run/nats/nats.pid"

###############
#             #
# Monitoring  #
#             #
###############
# http: 8222
# server_name:$POD_NAME
# cluster {
#   name: "hiphops_cluster"
# }

###################################
#                                 #
# NATS JetStream                  #
#                                 #
###################################
jetstream {
  # max_mem: 1Gi
  domain: hiphops

  # max_file:1Gi
}
#include "advertise/client_advertise.conf"

#################
#               #
# NATS Leafnode #
#               #
#################
leafnodes {
  listen: "0.0.0.0:5422"
  port: 5422
  #include "advertise/gateway_advertise.conf"
}
# lame_duck_grace_period: 10s
# lame_duck_duration: 30s

##################
#                #
# Authorization  #
#                #
##################
no_auth_user: "hiphops"
"accounts": {
  "HIPHOPS": {
    "jetstream":true,
    "users":[
        {user: hiphops, password: "verysecurepassword-123"}
    ]
    "exports":[
      {service: "$JS.hiphops.API.>", response: stream},
      {service: "$JS.FC.>"},

      {stream: "hops-account.>", accounts: ["hops-account"]},
      {service: "hops-account.>", accounts: ["hops-account"]},
    ]
  },

  "hops-account": {
    "jetstream":true,
    "users":[
        {user: "hops-account", password: "verysecurepassword-345"}
    ]
    "imports":[
      {service: {account:"HIPHOPS", subject: "$JS.hiphops.API.>"}, to: "JS.hiphops@hops-account.API.>"},
      {service: {account: "HIPHOPS", subject: "$JS.FC.>"}},
      
      {stream: {account:"HIPHOPS", subject:"hops-account.>"}, prefix: "read"},
      {service: {account:"HIPHOPS", subject:"hops-account.>"}}
    ]
  }
}
